{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useEffect, useState } from 'react';\nimport decode from \"./decode\";\nexport function useBlurhash(blurhash) {\n  var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 32;\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 32;\n  var punch = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  punch = punch || 1;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    url = _useState2[0],\n    setUrl = _useState2[1];\n  useEffect(function () {\n    var isCanceled = false;\n    if (!blurhash) return;\n    var pixels = decode(blurhash, width, height, punch);\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    var context = canvas.getContext('2d');\n    var imageData = context.createImageData(width, height);\n    imageData.data.set(pixels);\n    context.putImageData(imageData, 0, 0);\n    canvas.toBlob(function (blob) {\n      if (!isCanceled) {\n        setUrl(function (oldUrl) {\n          if (oldUrl) {\n            URL.revokeObjectURL(oldUrl);\n          }\n          return blob ? URL.createObjectURL(blob) : oldUrl;\n        });\n      }\n    });\n    return function cleanupBlurhash() {\n      isCanceled = true;\n      setUrl(function (oldUrl) {\n        if (oldUrl) {\n          URL.revokeObjectURL(oldUrl);\n        }\n        return null;\n      });\n    };\n  }, [blurhash, height, width, punch]);\n  return url;\n}","map":{"version":3,"names":["useEffect","useState","decode","useBlurhash","blurhash","width","arguments","length","undefined","height","punch","_useState","_useState2","_slicedToArray","url","setUrl","isCanceled","pixels","canvas","document","createElement","context","getContext","imageData","createImageData","data","set","putImageData","toBlob","blob","oldUrl","URL","revokeObjectURL","createObjectURL","cleanupBlurhash"],"sources":["G:\\Pro\\locofy-react-native-project (3)\\node_modules\\expo-image\\src\\utils\\blurhash\\useBlurhash.tsx"],"sourcesContent":["// adapted from https://gist.github.com/ngbrown/d62eb518753378eb0a9bf02bb4723235\n// modified from https://gist.github.com/WorldMaker/a3cbe0059acd827edee568198376b95a\n// https://github.com/woltapp/react-blurhash/issues/3\n\nimport { useEffect, useState } from 'react';\n\nimport decode from './decode';\n\nexport function useBlurhash(\n  blurhash: string | undefined | null,\n  width: number = 32,\n  height: number = 32,\n  punch: number = 1\n) {\n  punch = punch || 1;\n\n  const [url, setUrl] = useState<string | null>(null);\n\n  useEffect(() => {\n    let isCanceled = false;\n\n    if (!blurhash) return;\n\n    const pixels = decode(blurhash, width, height, punch);\n\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const context = canvas.getContext('2d');\n    const imageData = context!.createImageData(width, height);\n    imageData.data.set(pixels);\n    context!.putImageData(imageData, 0, 0);\n    canvas.toBlob((blob) => {\n      if (!isCanceled) {\n        setUrl((oldUrl) => {\n          if (oldUrl) {\n            URL.revokeObjectURL(oldUrl);\n          }\n          return blob ? URL.createObjectURL(blob) : oldUrl;\n        });\n      }\n    });\n\n    return function cleanupBlurhash() {\n      isCanceled = true;\n      setUrl((oldUrl) => {\n        if (oldUrl) {\n          URL.revokeObjectURL(oldUrl);\n        }\n        return null;\n      });\n    };\n  }, [blurhash, height, width, punch]);\n\n  return url;\n}\n"],"mappings":";AAIA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,OAAOC,MAAM;AAEb,OAAM,SAAUC,WAAWA,CACzBC,QAAmC,EAGlB;EAAA,IAFjBC,KAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAgB,EAAE;EAAA,IAClBG,MAAA,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAiB,EAAE;EAAA,IACnBI,KAAA,GAAAJ,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAgB,CAAC;EAEjBI,KAAK,GAAGA,KAAK,IAAI,CAAC;EAElB,IAAAC,SAAA,GAAsBV,QAAQ,CAAgB,IAAI,CAAC;IAAAW,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA5CG,GAAG,GAAAF,UAAA;IAAEG,MAAM,GAAAH,UAAA;EAElBZ,SAAS,CAAC,YAAK;IACb,IAAIgB,UAAU,GAAG,KAAK;IAEtB,IAAI,CAACZ,QAAQ,EAAE;IAEf,IAAMa,MAAM,GAAGf,MAAM,CAACE,QAAQ,EAAEC,KAAK,EAAEI,MAAM,EAAEC,KAAK,CAAC;IAErD,IAAMQ,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/CF,MAAM,CAACb,KAAK,GAAGA,KAAK;IACpBa,MAAM,CAACT,MAAM,GAAGA,MAAM;IACtB,IAAMY,OAAO,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;IACvC,IAAMC,SAAS,GAAGF,OAAQ,CAACG,eAAe,CAACnB,KAAK,EAAEI,MAAM,CAAC;IACzDc,SAAS,CAACE,IAAI,CAACC,GAAG,CAACT,MAAM,CAAC;IAC1BI,OAAQ,CAACM,YAAY,CAACJ,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC;IACtCL,MAAM,CAACU,MAAM,CAAC,UAACC,IAAI,EAAI;MACrB,IAAI,CAACb,UAAU,EAAE;QACfD,MAAM,CAAC,UAACe,MAAM,EAAI;UAChB,IAAIA,MAAM,EAAE;YACVC,GAAG,CAACC,eAAe,CAACF,MAAM,CAAC;;UAE7B,OAAOD,IAAI,GAAGE,GAAG,CAACE,eAAe,CAACJ,IAAI,CAAC,GAAGC,MAAM;QAClD,CAAC,CAAC;;IAEN,CAAC,CAAC;IAEF,OAAO,SAASI,eAAeA,CAAA;MAC7BlB,UAAU,GAAG,IAAI;MACjBD,MAAM,CAAC,UAACe,MAAM,EAAI;QAChB,IAAIA,MAAM,EAAE;UACVC,GAAG,CAACC,eAAe,CAACF,MAAM,CAAC;;QAE7B,OAAO,IAAI;MACb,CAAC,CAAC;IACJ,CAAC;EACH,CAAC,EAAE,CAAC1B,QAAQ,EAAEK,MAAM,EAAEJ,KAAK,EAAEK,KAAK,CAAC,CAAC;EAEpC,OAAOI,GAAG;AACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}